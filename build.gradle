plugins {
    id "org.sonarqube" version "2.5"
}
apply plugin: 'java'
apply plugin: 'findbugs'
apply plugin: 'checkstyle'

sourceCompatibility = 1.7
version = '1.0.5'

// use maven central to get JARs
repositories {
    mavenCentral()
}

// dependencies
dependencies {
    testCompile 'junit:junit:4.+'
    testCompile group: 'commons-io', name: 'commons-io', version: '2.5'
}

jar {

    manifest {
        attributes(
                'Main-Class': 'cdb.main'
        )
    }
}

findbugs {
    excludeFilter = file("$rootProject.projectDir/config/findbugs/excludeFilter.xml")
}

// workaround for SonarQube plugin warning
// see https://stackoverflow.com/questions/44578302/splitting-all-ouput-directories-gradle
sourceSets.main.output.classesDir = new File(buildDir, "classes/main")
sourceSets.test.output.classesDir = new File(buildDir, "classes/test")
sonarqube {
    properties {
        property 'sonar.organization', 'duckasteroid-github'
        property 'sonar.host.url', 'https://sonarcloud.io'
        property 'sonar.login', System.getenv("SONARQUBE_KEY")

    }
}